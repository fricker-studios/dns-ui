name: Build and Deploy to Development

on:
  pull_request:
    branches:
      - main

jobs:
  build-multiarch-internal:
    name: Build and Push Multi-Arch Image (Internal)
    uses: fricker-studios/github-actions/.github/workflows/build-multiarch-image.yml@main
    with:
      image_name: ${{ vars.INTERNAL_REGISTRY_URL }}/internal/dns-ui
      registry: ${{ vars.INTERNAL_REGISTRY_URL }}
      push: true
      tags: |
        pr-${{ github.event.pull_request.number }}-${{ github.run_number }}
    secrets:
      registry_username: ${{ secrets.REGISTRY_USERNAME }}
      registry_password: ${{ secrets.REGISTRY_PASSWORD }}